# CPU 작동 원리
> - 중앙처리장치(CPU)는 컴퓨터의 모든 시스템을 제어 및 처리하는 가장 핵심적인 장치
> - 다양한 입력 장치로부터 정보를 입력받아 처리한 후, 그 결과는 출력장치로 보내는 일련의 과정을 제어하고 조정하는 일을 수행한다.

<br>

## CPU의 구성요소

### 1. 제어장치(Control Unit, CU)

> 명령어를 순서대로 실행할 수 있도록 제어하는 장치

- 주기억장치로부터 프로그램 명령을 순차적으로 꺼내 해독하고, 그 결과에 따라 명령어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 보낸다.
- 또한 이들 장치가 보낸 신호를 받아, 다음에 수행할 동작을 결정한다.
- `프로그램카운터(pc)`, `명령 해독기`, `부호기`, `명령 레지스터` 등으로 구성된다.

<br>

### 2. 연산장치(Arithmetic Logic Unit, ALU)

> 산술연산과 논리연산 수행하는 장치 (= 산술논리연산장치)

- 연산에 필요한 자료를 입력받아 산술, 논리, 관계, 이동 등 다양한 연산을 수행한다.
- 연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 보낸다.

<br>

### 3. 레지스터(Resgister)

> 고속기억장치

- 명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장한다.
- 레지스터는 메모리 계층의 최상위에 위치하며 가장 빠른 속도로 접근 가능한 메모리이다.
- 용도에 따라 범용 레지스터와 특수목적 레지스터로 구분된다.
  - 범용 레지스터: 연산에 필요한 데이터나 연산 결과를 임시로 저장
  - 특수목적 레지스터: 특별한 용도로 사용하는 레지스터
    1. MAR(메모리 주소 레지스터): 읽기와 쓰기 연산을 수행할 주기억장치 주소 저장
    2. PC(프로그램 카운터): 다음에 수행할 명령어 주소 저장
    3. SP(스택 포인터): 스택의 최상위 주소를 저장
    4. IX(인덱스 레지스터): 인덱스 주소 지정 방식에서 인덱스를 저장
    5. IR(명령어 레지스터): 현재 실행 중인 명령어 저장
    6. MBR(메모리 버퍼 레지스터): 주기억장치에서 읽어온 데이터 or 저장할 데이터 임시 저장
    7. AC(누산기): 연산 결과 임시 저장
    8. PSR(프로그램 상태 레지스터): CPU의 현재 상태 정보를 저장

<br>

## CPU의 동작과정

> CPU의 연산은 `Fetch`, `Decode`, `Execute`, `Writeback`의 순서로 반복됨

![CPU 동작과정](./assets/CPU%20동작과정.png)

1. 인출(Fetch): 메모리 상의 프로그램 카운터(PC)가 가리키는 명령어를 CPU로 인출하여 적재한다.
   - 명령어 수행을 시작할 주소를 프로그램 카운터에 저장한다.
   - 이 주소값을 통해 주기억장치의 해당 주소에서 명령어를 받아온다.
   - 
2. 해석(Decode): 명령어의 종류와 타겟 등을 해석하여 결정한다.
3. 실행(Execute): 해석된 명령어에 따라 데이터에 대한 연산을 수행한다.
4. 쓰기(Writeback): 수행 완료된 데이터를 메모리에 기록한다.

<br>

<br>
